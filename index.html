<!DOCTYPE html>
<html>
	<head>
	    <title>drippr</title>
	    <link rel="shortcut icon" href="images/drop.svg">
	    <link rel="stylesheet" href="css/bootstrap.css">
	    <link rel="stylesheet" href="css/homepage.css">
	    <link rel="stylesheet" href="css/article.css">
	    <link rel="stylesheet" href="css/choose.css">
	    <link rel="stylesheet" href="css/bucket.css">
	    <script type="text/javascript" src="/scripts/handlebars.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script type="text/javascript" src="/scripts/scripts.js"></script>
		<script>var Slider = function() { this.initialize.apply(this, arguments) }
	  		Slider.prototype = {
	 
			    initialize: function(slider) {
					this.ul = slider.children[0];
					this.li = this.ul.children;

					// make <ul> as large as all <li>â€™s
					this.ul.style.width = (this.li[0].clientWidth * this.li.length) + 'px';

					this.currentIndex = 0;
			    },
			 
			    goTo: function(index) {
					// filter invalid indices
					if (index < 0 || index > this.li.length - 1)
					return;

					// move <ul> left
					this.ul.style.left = '-' + (100 * index) + '%';

					this.currentIndex = index;
			    },
			 
			    goToPrev: function() {
					this.goTo(this.currentIndex - 1);
			    },
			 
			    goToNext: function() {
					this.goTo(this.currentIndex + 1);
				}
			}
		</script>
	</head>
    <body>
    	<div id="fb-root"></div>
			<script>
				window.fbAsyncInit = function() {
				FB.init({
				appId      : '231951950330964',
				status     : true, // check login status
				cookie     : true, // enable cookies to allow the server to access the session
				xfbml      : true  // parse XFBML
				});

				// Here we subscribe to the auth.authResponseChange JavaScript event. This event is fired
				// for any authentication related change, such as login, logout or session refresh. This means that
				// whenever someone who was previously logged out tries to log in again, the correct case below 
				// will be handled. 
					FB.Event.subscribe('auth.authResponseChange', function(response) {
						// Here we specify what we do with the response anytime this event occurs. 
						if (response.status === 'connected') {
							// The response object is returned with a status field that lets the app know the current
							// login status of the person. In this case, we're handling the situation where they 
							// have logged in to the app.
							testAPI();
							getFriends();
						} else if (response.status === 'not_authorized') {
							// In this case, the person is logged into Facebook, but not into the app, so we call
							// FB.login() to prompt them to do so. 
							// In real-life usage, you wouldn't want to immediately prompt someone to login 
							// like this, for two reasons:
							// (1) JavaScript created popup windows are blocked by most browsers unless they 
							// result from direct interaction from people using the app (such as a mouse click)
							// (2) it is a bad experience to be continually prompted to login upon page load.
							FB.login();
						} else {
							// In this case, the person is not logged into Facebook, so we call the login() 
							// function to prompt them to do so. Note that at this stage there is no indication
							// of whether they are logged into the app. If they aren't then they'll see the Login
							// dialog right after they log in to Facebook. 
							// The same caveats as above apply to the FB.login() call here.
							FB.login();
						}
					});
				};

				// Load the SDK asynchronously
				(function(d){
				var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
				if (d.getElementById(id)) {return;}
				js = d.createElement('script'); js.id = id; js.async = true;
				js.src = "//connect.facebook.net/en_US/all.js";
				ref.parentNode.insertBefore(js, ref);
				}(document));

				// Here we run a very simple test of the Graph API after login is successful. 
				// This testAPI() function is only called in those cases. 
				function testAPI() {
				console.log('Welcome!  Fetching your information.... ');
				FB.api('/me', function(response) {
					console.log('Good to see you, ' + response.name + '.');
				});
				};

				FB.logout(function(response) {
				  // user is now logged out
				});

				// Gets Facebook friends as an array of Objects 
				function getFriends() {
					FB.api( "/me/friends",
						function (response) {
							console.log(response.data);
								if (response && !response.error) {
							/* handle the result */
								}
						}
					);
				}
			</script>

        <div id="my-container" class="table-responsive">
        </div>
        <!--Handlebar templates start-->
		<script id="article-template" type="text/x-handlebars-template"> 
        	<div class = "container-fluid">
	        	<div class = "row">
		        	<div class = "menuBar col-md-3">
			        	<div class = "row">
				        	<div id = "dripprdiv">
				        		<a href = "http://drippr.me"> 
				        			<img id = "logo" src = "images/logo.svg">
				        		</a>
				        	</div>
			        	</div>
			        	<div class = "dropDown">
							<ul class = "menu1">
								<li class = "menu2 menu4 menu5 menu6 menu7">
									<a href="">
										inbox
									</a>
									<ul class = "menu1 menu3">
										<li class = "menu2 menu4 menu5">
											<a href="">
												sent
											</a>
										</li>
										<li class = "menu2 menu4 menu5">
											<a href="">
												read it later
											</a>
										2</li>
									</ul>
								</li>
							</ul>
			        	</div>
			        	<div class = "mainCatDiv">
				        	{{#each prefs}}
				        		<div class = "categ">
				        			{{this.Cat}}
				        		</div>
				        	{{/each}}
				        </div>
		        	</div>
		        	<div class = "col-md-9">
		        		<div class = "row">
		        			<div class = "col-md-1">
		        				<div class = "headBub">
		        					<img class = "headBubImg" src = "/images/drop.svg">
		        				</div>
		        			</div>
		        			<div class = "col-md-1">
		        				<div class = "headBub">
		        					<img class = "headBubImg" src = "/images/bucket.svg">
		        				</div>
		        			</div>
		        			<div class = "col-md-1">
		        				<div class = "headBub">
		        					<img class = "headBubImg" src = "/images/settings.svg">
		        				</div>
		        			</div>
		        			<div class = "col-md-6">
		        			</div>
		        			<div class = "col-md-3">
		        				<div class = "header" id = "fb">
									<fb:login-button show-faces="true" width="200" max-rows="1">
									</fb:login-button>
								</div>
		        			</div>
		        		</div>
		        		<div class = "row">
			        		<div class = "col-md-2">
					        	<div class = "arrow" id = "prevArrow">
					        		<a href = "javascript:sliders[0].goToPrev()">
					        			<img src = "/images/arrow.svg">
									</a>
								</div>
							</div>
							<div class = "col-md-8">
								<div class="slider">
						            <ul>
						            	{{#each articles}}
						                	<li>
								                <div class = "mainBubble">
													<h3 id = "source"> 
														{{ this.source }}
													</h3> 
									                
									                <div class = "headlineDiv">
									                <a id = "headline" href = "{{ this.url }}" target="_blank">
									                	<h2>
									                		{{ this.headline }}
									                	</h2>
								                	</a>
								                	</div>

								                	<div id = "imageDiv">
										                <a href = "{{ this.url }}" target="_blank">
										                	<img id = "fitimage" src = "{{ this.imgUrl }}" >
									                	</a>
								                	</div>

									                <div class = "row" id = "articleOp">
										                <div class = "col-md-2">
															<div class = "opinion">
																<img src = "images/readLater.svg" class="opinion" article="{{this.id}}">
															</div>
									                	</div>
									                	<div class = "col-md-3">
															<div class = "opinion">
																<img src = "images/like.svg" class="like" article="{{this.id}}">
															</div>
														</div>
														<div class = "col-md-1">
															<p article="{{this.id}}">
																{{ this.numLikes }}
															</p>
									                	</div>
									                	<div class = "col-md-3">
															<div class = "opinion">
																<img src = "images/dislike.svg" class="dislike" article="{{this.id}}">
															</div>
														</div>
										                <div class = "col-md-1">
															<p article="{{this.id}}">
																{{ this.numDislikes }}
															</p>
														</div>
														<div class = "col-md-2">
															<div class = "number">
																<img src = "images/drop.svg" class="opinion" article="{{this.id}}">
															</div>
														</div>
									                </div>
								                </div>
						                	</li> 
						            	{{/each}}
						            </ul>
				            	</div>
				            </div>
							<div class = "col-md-2">
								<div class = "arrow" id = "nextArrow">
									<a href = "javascript:sliders[0].goToNext()">
										<img src = "/images/revArrow.svg">
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<script>
				var sliders = [];
				$('.slider').each(function() {
				sliders.push(new Slider(this))
				});
			</script>
		</script>

        <script id="homepage-template" type="text/x-handlebars-template">
	    	<div class = "header" id = "dripprdiv">
	    		<a href = "http://drippr.me">
	    			<img src = "images/logo.svg">
    			</a>
			</div>
			<div class = "row">
				<div class = "col-md-4">
					<a href = "http://funtime.com">
						<div class = "bubble">
							<h1 class = "HPheadings">
								dripps
							</h1> 
							<img class = "fitHPimg" src = "images/paper.svg">
						</div>
					</a>
				</div>
				<div class = "col-md-4">
					<a href = "http://funtime.com">
						<div class = "bubble">
							<h1 class = "HPheadings">
								bucket
							</h1>
							<img class = "fitHPimg" src = "images/bucket.svg">
						</div>
					</a>
				</div>
				<div class = "col-md-4">
					<a href = "http://funtime.com">
						<div class = "bubble">
							<h1 class = "HPheadings">
								settings
							</h1>
							<img class = "fitHPimg" src = "images/settings.svg">
						</div>
					</a>
				</div>
			</div>
			<div class = "header" id = "fb">
				<fb:login-button show-faces="true" width="200" max-rows="1">
				</fb:login-button>
			</div>
       	</script>

       	<script id="choose-template" type="text/x-handlebars-template">
	     	<div class = "header" id = "dripprdiv">
	     		<a href = "http://drippr.me">
	     			<img src = "images/logo.svg">
     			</a>
 			</div>
 			<div class = "row">
 				<div class = "col-md-3">
					<div class = "bubble">
						<h1 class = "HPheadings"> 
							dripps
						</h1>
						<img class = "fitHPimg" src = "images/paper.svg">
					</div>
				</div>
				<div class = "col-md-3">
					<div class = "bubble">
						<h1 class = "HPheadings">
							bucket
						</h1>
						<img class = "fitHPimg" src = "images/bucket.svg">
					</div>
				</div>
				<div class = "col-md-3">
					<div class = "bubble">
						<h1 class = "HPheadings">
							settings
						</h1>
						<img class = "fitHPimg" src = "images/settings.svg">
					</div>
				</div>
				<div class = "col-md-3">
					<div class = "bubble">
						<h1 class = "HPheadings">
							dripps
						</h1>
						<img class = "fitHPimg" src = "images/paper.svg">
					</div>
				</div> 
			</div>
			<div class = "row">
 				<div class = "col-md-3">
					<div class = "bubble">
						<h1 class = "HPheadings"> 
							dripps
						</h1>
						<img class = "fitHPimg" src = "images/paper.svg">
					</div>
				</div>
				<div class = "col-md-3">
					<div class = "bubble">
						<h1 class = "HPheadings">
							bucket
						</h1>
						<img class = "fitHPimg" src = "images/bucket.svg">
					</div>
				</div>
				<div class = "col-md-3">
					<div class = "bubble">
						<h1 class = "HPheadings">
							settings
						</h1>
						<img class = "fitHPimg" src = "images/settings.svg">
					</div>
				</div>
				<div class = "col-md-3">
					<div class = "bubble">
						<h1 class = "HPheadings">
							dripps
						</h1>
						<img class = "fitHPimg" src = "images/paper.svg">
					</div>
				</div> 
			</div>
			<div class = "header" id = "fb">
				<fb:login-button show-faces="true" width="200" max-rows="1">
				</fb:login-button>
			</div>
       	</script>

       	<script id="bucket-template" type="text/x-handlebars-template">
	     	<div class = "header" id = "dripprdiv">
	     		<a href = "http://drippr.me">
	     			<img src = "images/logo.svg">
     			</a>
 			</div>
 			<div class = "row">
 				<div class = "col-md-1">
 				</div>
				<div class = "bucketCard col-md-10">
					<div class = "row">
						<div class = "col-md-4" id = "messages">
							<div id = "bucketSel">
							</div>
							<div id = "messageSlider">
								{{#each inbox}}
									<div id = "eachMess">
										{{this.To}}
									</div>
								{{/each}}
							</div>
						</div>
						<div class = "col-md-8" id = "disMess">
							<div id = "artInfo">
								<div id = "disHead">
								</div>
								<div id = "disImage">
									<img id = "disImageSize" src = "https://yt3.ggpht.com/-nIXy7s7oY2U/AAAAAAAAAAI/AAAAAAAAAAA/UX73pp3dT30/s88-c-k-no/photo.jpg">
								</div>
								<div id = "disOp">
								</div>
							</div>
							<div id = "convo">
							</div>
						</div>
					</div>
				</div>
				<div class = "col-md-1">
				</div>
       	</script>

       	<script id="settings-template" type="text/x-handlebars-template">
	     	<div class = "header" id = "dripprdiv">
	     		<a href = "http://drippr.me">
	     			<img src = "images/logo.svg">
     			</a>
 			</div>
			<div class = "bubble">
				<h1> 
					dripps
				</h1>
				<img class = "fitHPimg" src = "images/paper.svg">
			</div> 
			<div class = "bubble">
				<h1>
					bucket
				</h1>
				<img class = "fitHPimg" src = "images/bucket.svg">
			</div>
			<div class = "bubble">
				<h1>
					settings
				</h1>
				<img class = "fitHPimg" src = "images/settings.svg">
			</div>
			<div class = "bubble">
				<h1>
					dripps
				</h1>
				<img class = "fitHPimg" src = "images/paper.svg">
			</div> 
			<div class = "header" id = "fb">
				<fb:login-button show-faces="true" width="200" max-rows="1">
				</fb:login-button>
			</div>
       	</script>

	</body>
</html>